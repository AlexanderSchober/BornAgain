############################################################################
# CMakeLists.txt file for running functional tests
############################################################################

enable_testing()

include(CTestCustom)

add_custom_target(check ${CMAKE_CTEST_COMMAND})
#add_custom_target(check ${CMAKE_CTEST_COMMAND} -D Experimental)
#add_custom_target(check ${CMAKE_CTEST_COMMAND} -V)
# export CTEST_OUTPUT_ON_FAILURE=ON will give some output on failure

execute_process(COMMAND ${CMAKE_COMMAND} -E copy_directory ${CMAKE_SOURCE_DIR}/Tests/ReferenceData/BornAgain ${CMAKE_BINARY_DIR}/Tests/ReferenceData/BornAgain)
execute_process(COMMAND ${CMAKE_COMMAND} -E copy_directory ${CMAKE_SOURCE_DIR}/Tests/FunctionalTests/TestPyCore ${CMAKE_BINARY_DIR}/Tests/FunctionalTests/TestPyCore)
execute_process(COMMAND ${CMAKE_COMMAND} -E copy_directory ${CMAKE_SOURCE_DIR}/Tests/FunctionalTests/TestPyFit ${CMAKE_BINARY_DIR}/Tests/FunctionalTests/TestPyFit)

add_subdirectory(TestCore)
add_subdirectory(TestFit)
if(BORNAGAIN_PYTHON)
    add_subdirectory(TestPyCore)
    add_subdirectory(TestPyFit)
endif()


